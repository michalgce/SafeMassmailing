<ui:composition template="../index.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
        >
<ui:define name="content">
    <p:steps styleClass="custom" activeIndex="2">
        <p:menuitem value="Choose groups" />
        <p:menuitem value="Create message" />
        <p:menuitem value="Test" />
        <p:menuitem value="Send message" />
    </p:steps>

    <h:form>
        <p:commandButton styleClass="btn btn-success" actionListener="#{testService.runTests}"
                         value="START A TESTS" update="spamAssassinReportGrid successPanel warningPanel dangerPanel" onclick=""/>
        <hr />
        <br />
        <h:panelGroup id="spamAssassinReportGrid">
            <p:outputPanel id="successPanel" style="display: block" styleClass="alert alert-success" rendered="#{spamAssassinService.spamStatus == 'NO_SPAM'}">
                Congratulations! <br/>
                Your message looks safty.<br/>
                <br/>
                Now you could send it to your recipients.<br />
                <p:commandButton styleClass="btn btn-primary" actionListener="#{campaigneService.goToMessage}" value="Change your title/message" />
                <p:commandButton styleClass="btn btn-primary" actionListener="#{campaigneService.goToSend}" value="Send IT" />
            </p:outputPanel>
            <p:outputPanel id="warningPanel" style="display: block" styleClass="alert alert-warning" rendered="#{spamAssassinService.spamStatus == 'MAYBE_SPAM'}">
                Could be better..<br/>
                Your message looks safty but there is a propability that it point to SPAM bucket.<br/>
                <br/>
                You could send this message with risky undelivery message.<br/>
                <p:commandButton styleClass="btn btn-primary" actionListener="#{campaigneService.goToMessage}" value="Change your title/message" />
                <p:commandButton styleClass="btn btn-primary" actionListener="#{campaigneService.goToSend}" value="Send IT with risk" />
            </p:outputPanel>
            <p:outputPanel id="dangerPanel" style="display: block" styleClass="alert alert-danger" rendered="#{spamAssassinService.spamStatus == 'SPAM'}">
                THIS IS SPAM!<br/>
                Be sure if you send this campaing that it point directly to SPAM bucket.<br/>
                YOU MUSN'T SEND THIS <br/>
                <p:commandButton styleClass="btn btn-primary" actionListener="#{campaigneService.goToMessage}" value="Change your title/message" />
            </p:outputPanel>
            <p:tabView orientation="left">
                <p:tab title="&lt;img src='../javax.faces.resource/#{spamAssassinTest.status}.png.xhtml?ln=image'/&gt; SpamAssasin Test">
                    <h3>Spam points: <h:outputText id="score" value="#{spamAssassinService.spamAssassinResponseDto.score}" /></h3>
                    Raport: <br/>
                    <h:outputText id="report" value="#{spamAssassinService.spamAssassinResponseDto.report}" styleClass="preformatted" />
                </p:tab>
                <p:tab title="&lt;img src='../javax.faces.resource/#{bayessTest.status}.png.xhtml?ln=image'/&gt; Bayess Naive Test">
                    Bayess Naive Test
                    Test result : #{bayessTest.isThisSpam}
                </p:tab>
                <p:tab title="&lt;img src='../javax.faces.resource/#{gmailTest.status}.png.xhtml?ln=image'/&gt; Gmail Spam Test">
                    Gmail spam test
                    Test result : #{gmailTest.isThisSpam}
                </p:tab>
            </p:tabView>
        </h:panelGroup>
        <hr />
    </h:form>
    <br />
</ui:define>
</ui:composition>